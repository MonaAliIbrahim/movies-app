{"version":3,"file":"static/js/897.b078c002.chunk.js","mappings":"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","sources":["Components/Login/Login.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Form from 'react-bootstrap/Form';\r\nimport FloatingLabel from 'react-bootstrap/FloatingLabel';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Collapse from 'react-bootstrap/Collapse';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport joi from 'joi';\r\nimport { AuthContext } from '../../Shared/Context/AuthStore';\r\nimport { Navigate, useNavigate } from 'react-router-dom';\r\n\r\nexport default function Login({saveUserData}) {\r\n\r\n  const [user, setUser] = useState({email: '', password: ''});\r\n\r\n  const [validationErrors, setValidationErrors] = useState([]);\r\n  const [emailError, setEmailError] = useState('');\r\n  const [passwordError, setPasswordError] = useState('');\r\n\r\n  const {login, loginResponse} = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n  const [serverError, setServerError] = useState('');\r\n  const [fireFlag, setFireFlag] = useState(null);\r\n\r\n  const getFormValue = (e) => {\r\n    let currentUser = {...user};\r\n    currentUser[e.target.name] = e.target.value;\r\n    setUser(currentUser);\r\n  }\r\n\r\n  const checkValidation = () => {\r\n    // Reset Prev Error Messages\r\n    setValidationErrors('');\r\n    setEmailError('');\r\n    setPasswordError('');\r\n    // Create Schema\r\n    const schema = joi.object({\r\n      email: joi.string().required().email({minDomainSegments: 2, tlds: { allow: ['com', 'net'] }}),  \r\n      password: joi.string().required().min(3).max(30),\r\n    })\r\n    // Validation Response\r\n    let { error } = schema.validate(user, {abortEarly: false});\r\n    return error;\r\n  }\r\n\r\n  const submitForm = (e) => {\r\n    e.preventDefault();\r\n    setServerError('');\r\n    let validationError = checkValidation();\r\n    if(validationError) {\r\n      // Validation Error case\r\n      setValidationErrors(validationError.details);\r\n    }else {\r\n      // success case\r\n      setFireFlag(true);\r\n      login(user);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(validationErrors.length > 0) {\r\n      for(const error of validationErrors) {\r\n        // Email\r\n        if(error.context.key === 'email') {\r\n          if(error.type.includes('pattern')) {\r\n            setEmailError(\"Please Enter a valid Email\");\r\n          }else {\r\n            setEmailError(error.message.replace('\"email\"','Email'));\r\n          }\r\n        }\r\n        // Password\r\n        else if(error.context.key === 'password') {\r\n          setPasswordError(error.message.replace('\"password\"','Password'));\r\n        }\r\n      }\r\n    }\r\n  }, [validationErrors])\r\n\r\n  useEffect(() => {\r\n    if(loginResponse && fireFlag !== null) {\r\n      if(loginResponse.message === 'success') {\r\n        localStorage.setItem('userToken', loginResponse.token);\r\n        saveUserData();\r\n        navigate('/');\r\n      }else {\r\n        setServerError(loginResponse.message);\r\n      }\r\n      setFireFlag(false);\r\n    }\r\n  }, [loginResponse, fireFlag])\r\n\r\n  return (\r\n    localStorage.getItem('userToken') ? <Navigate to=\"/\"/> : \r\n    <Row className=\"justify-content-center mt-5 pt-5\">\r\n      <Col xs=\"12\" md=\"8\">\r\n        <Card className=\"bg-transparent border-0\">\r\n          <Card.Header className=\"bg-transparent border-0 text-white\">\r\n            <Card.Title>Login Form</Card.Title>\r\n          </Card.Header>\r\n          <Card.Body>\r\n            <form onSubmit={submitForm}>\r\n            {fireFlag !== null && serverError &&\r\n              <Alert variant='danger' className=\"text-center text-capitalize\">{serverError}</Alert>}\r\n              <FloatingLabel label=\"Email\" className=\"mb-1\">\r\n                <Form.Control type=\"email\" name=\"email\" placeholder=\"Email\" onChange={getFormValue}/>\r\n              </FloatingLabel>\r\n              <Collapse in={emailError.length > 0 ? true: false}>\r\n                <Form.Text className=\"text-danger\">{emailError}</Form.Text>\r\n              </Collapse>\r\n              <FloatingLabel label=\"Password\" className=\"mt-3 mb-1\">\r\n                <Form.Control type=\"password\" name=\"password\" placeholder=\"Password\" onChange={getFormValue}/>\r\n              </FloatingLabel>\r\n              <Collapse in={passwordError.length > 0 ? true: false}>\r\n                <Form.Text className=\"text-danger\">{passwordError}</Form.Text>\r\n              </Collapse>\r\n              <Button className=\"float-end my-4 form-btn\" type=\"submit\">\r\n                Login\r\n              </Button>\r\n            </form>\r\n          </Card.Body>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n"],"names":["Login","saveUserData","useState","email","password","user","setUser","validationErrors","setValidationErrors","emailError","setEmailError","passwordError","setPasswordError","useContext","AuthContext","login","loginResponse","navigate","useNavigate","serverError","setServerError","fireFlag","setFireFlag","getFormValue","e","currentUser","target","name","value","useEffect","length","error","context","key","type","includes","message","replace","localStorage","setItem","token","getItem","to","className","xs","md","onSubmit","preventDefault","validationError","joi","required","minDomainSegments","tlds","allow","min","max","validate","abortEarly","details","variant","label","placeholder","onChange","in"],"sourceRoot":""}