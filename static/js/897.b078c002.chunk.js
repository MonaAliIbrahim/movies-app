"use strict";(self.webpackChunkmovies_app=self.webpackChunkmovies_app||[]).push([[897],{8712:function(e,a,s){s.r(a),s.d(a,{default:function(){return b}});var t=s(7762),n=s(1413),r=s(885),l=s(2791),i=s(9743),o=s(2677),c=s(8322),m=s(3053),d=s(3360),u=s(9140),x=s(7858),p=s(2469),g=s(4819),h=s.n(g),Z=s(7985),f=s(7689),j=s(184);function b(e){var a=e.saveUserData,s=(0,l.useState)({email:"",password:""}),g=(0,r.Z)(s,2),b=g[0],v=g[1],w=(0,l.useState)([]),y=(0,r.Z)(w,2),S=y[0],k=y[1],N=(0,l.useState)(""),E=(0,r.Z)(N,2),C=E[0],T=E[1],P=(0,l.useState)(""),D=(0,r.Z)(P,2),q=D[0],F=D[1],I=(0,l.useContext)(Z.V),L=I.login,_=I.loginResponse,z=(0,f.s0)(),B=(0,l.useState)(""),H=(0,r.Z)(B,2),R=H[0],U=H[1],V=(0,l.useState)(null),A=(0,r.Z)(V,2),G=A[0],J=A[1],K=function(e){var a=(0,n.Z)({},b);a[e.target.name]=e.target.value,v(a)};return(0,l.useEffect)((function(){if(S.length>0){var e,a=(0,t.Z)(S);try{for(a.s();!(e=a.n()).done;){var s=e.value;"email"===s.context.key?s.type.includes("pattern")?T("Please Enter a valid Email"):T(s.message.replace('"email"',"Email")):"password"===s.context.key&&F(s.message.replace('"password"',"Password"))}}catch(n){a.e(n)}finally{a.f()}}}),[S]),(0,l.useEffect)((function(){_&&null!==G&&("success"===_.message?(localStorage.setItem("userToken",_.token),a(),z("/")):U(_.message),J(!1))}),[_,G]),localStorage.getItem("userToken")?(0,j.jsx)(f.Fg,{to:"/"}):(0,j.jsx)(i.Z,{className:"justify-content-center mt-5 pt-5",children:(0,j.jsx)(o.Z,{xs:"12",md:"8",children:(0,j.jsxs)(u.Z,{className:"bg-transparent border-0",children:[(0,j.jsx)(u.Z.Header,{className:"bg-transparent border-0 text-white",children:(0,j.jsx)(u.Z.Title,{children:"Login Form"})}),(0,j.jsx)(u.Z.Body,{children:(0,j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),U("");var a=(k(""),T(""),F(""),h().object({email:h().string().required().email({minDomainSegments:2,tlds:{allow:["com","net"]}}),password:h().string().required().min(3).max(30)}).validate(b,{abortEarly:!1}).error);a?k(a.details):(J(!0),L(b))},children:[null!==G&&R&&(0,j.jsx)(p.Z,{variant:"danger",className:"text-center text-capitalize",children:R}),(0,j.jsx)(m.Z,{label:"Email",className:"mb-1",children:(0,j.jsx)(c.Z.Control,{type:"email",name:"email",placeholder:"Email",onChange:K})}),(0,j.jsx)(x.Z,{in:C.length>0,children:(0,j.jsx)(c.Z.Text,{className:"text-danger",children:C})}),(0,j.jsx)(m.Z,{label:"Password",className:"mt-3 mb-1",children:(0,j.jsx)(c.Z.Control,{type:"password",name:"password",placeholder:"Password",onChange:K})}),(0,j.jsx)(x.Z,{in:q.length>0,children:(0,j.jsx)(c.Z.Text,{className:"text-danger",children:q})}),(0,j.jsx)(d.Z,{className:"float-end my-4 form-btn",type:"submit",children:"Login"})]})})]})})})}}}]);
//# sourceMappingURL=897.b078c002.chunk.js.map